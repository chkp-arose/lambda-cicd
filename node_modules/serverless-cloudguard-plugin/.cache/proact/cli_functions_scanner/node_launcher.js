const util = require('util')
const fs = require('fs');
const code_analysis = require("../cli_function_code_analysis_node/index.js");

// first arg is at place 2 (0: node, 1: filename. 2: arg)
var json_input_file_name = process.argv[2]
console.log("json_input_file_name",json_input_file_name)
var file_data = fs.readFileSync(json_input_file_name, 'utf8')
console.log("file_data",file_data)
var event = JSON.parse(file_data);
console.log("event",event)

function callback(err, event) {
    if (err) {
        console.log(err)
        process.exit(1)
    }
    console.log(JSON.stringify(event))
    fs.writeFileSync(json_input_file_name, JSON.stringify(event) , 'utf-8');
}

code_analysis.handler(event, {}, callback)

