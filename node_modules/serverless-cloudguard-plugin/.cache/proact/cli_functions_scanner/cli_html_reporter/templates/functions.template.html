<div class="card">
    {# Function Button #}
    <div class="card-header text-{{group_style}} text-white">
        <h6 class="mb-0 align-middle" style="{{ macros.conditionalValue('cursor:pointer', func_data.get('Features')) }}"
            data-toggle="collapse" data-target="#{{ func }}-content" aria-expanded="false" >
            <i class="material-icons align-middle">{{group_title | function_state_to_material_icon}}</i>
            {% if group_title != 'Failed' and func_data.HasErrors %}
            <i class="material-icons align-middle float-right">warning</i>
            {% endif %}
            {{ func }}
        </h6>
    </div>

    {# Function Content #}
    <div id="{{ func }}-content" class="collapse" data-parent="#{{group_title}}">
        <ul class="list-group list-group-flush accordion" id="{{ func }}-features">
            {% for feature, feature_data in func_data.Features.iteritems() %}
            {% with
            res_style= feature_data.Result | feature_result_to_bootstrap_style,
            f_target = func + "_" + feature,
            show_more = feature_data.HasExtraData %}
            <li class="list-group-item pb-0" style="{{ macros.conditionalValue('cursor:pointer', show_more) }}">
                <div class="media text-muted pt-1 {{ 'collapser-button' if show_more }}"
                     data-toggle="collapse" data-target=".{{f_target}}" aria-expanded="false">
                    <i class="material-icons align-middle ml-2 mr-3 mt-2 text-{{feature_data.Result | feature_result_to_bootstrap_style}}">
                        {{feature_data.Result | feature_result_to_material_icon}}
                    </i>
                    <p class="media-body pb-3 mb-0 small ">
                        <strong class="d-block text-dark">{{ feature | split_on_caps }}</strong>
                        <span class="badge badge-{{ res_style }} badge-pill">{{ feature_data.Severity }}</span>
                        {{ feature_data.ShortReason or feature_data.Result }}
                    </p>
                </div>
                {% if show_more %}
                <div data-parent="#{{ func }}-features" class="collapse {{f_target}}">
                    <hr class="mb-0"/>
                    {% include feature + '.template.html' ignore missing %}
                </div>
                {% endif %}
            </li>
            {% endwith %}
            {% endfor %}
        </ul>
    </div>
</div>
